# Data

This section will show the data that will be available to the client
through a GraphQL backend (First [graph.cool](https://www.graph.cool/), then possibly a [graphql.js](https://github.com/graphql/graphql-js) server intergrated with a 
[nuxt.js express server](https://github.com/nuxt-community/express-template))

## Data Types & Examples
### Subforums
```javascript
type Subforum {
  url: String,
  name: String
}

const subforums = [ // an array of Subforums
  {
    url: 'nuxtjs', // used for fetching data (Posts) & in route name
    name: 'Nuxt.js' // used in the title section of the subforum & in the navigation
  }
];
```

### Posts
```javascript
type Post {              
  id: Int,
  name: String,
  author: String,
  content: String,
  voteCount: Int,
  createdAt: Date,
  comments: {
    author: String,
    content: String
  }
}

const posts = [ // an array of Posts
  {
    id: 0, // used for fetching data (Individial post) & in route name
    title: 'Page Transitions in Nuxt.js (vue-router)', // used in title (Subforum + individual)
    author: 'joealden' // name of author, shown only in individual post, not subforum
    content: 'https://nuxtjs.org', 
    voteCount: 20 // current amount of votes 
    createdAt: new Date(), // generated by Date(), used for sorting + formatted in post
    comments: [
      {
        author: 'joealden', // author of comment
        content: 'Thanks for the link!' // content of comment
      }
    ]
  }
];
```

## Queries

### Get all subforums for navigation (~/components/Navigation.vue)
It is still undecided whether or not both navigation and subforums will have infinite scrolling. 
(Where the when the user scrolls to the bottom of the current set of data, more data with be asyncronously loaded in the background 
(Like facebook does on the main feed))

Infinite scoll is a better option that just loading the whole list at once, because if the subforum list grows big, then this loading mechanism will not scale well, and the user will be left waiting. 
Also, it would be a waste of data sent down the wire, as the user most likely isn't going to scroll down the whole list.

For now, this is the query that will be executed to load the navigation (No infinite scroll)

```javascript
query {
  allSubforums {
    id
    name
  }
}
```

### Get all posts for subforum (~/pages/subforum/_index.vue (`subforumId = index`))
As stated in the above section, while infinite scrolling would be the better option. 
To start, we will load all posts. Then later, we will move to a paginated system, then to an infinite scrolling system.

For now, this is the query that will be executed to load the subforum (No infinite scoll / pagination)

```javascript
query {
  allPosts(subforum: subforumId) {
    id
    title
  }
}
```

### Get post details for post (~/pages/post/_index.vue (`postId = index`))
This query will be executed when routing to a specific page

```javascript
query {
  post(post: postId) {
    title
    author
    content
    timePosted
    allComments(post: postId) {
      author
      content
    }
  }
}
```

## Mutations
**TODO**:
- Add post
- Add Comment
- Add vote

## Subscriptions?
**TODO**:
- Live vote count
- Live comments



